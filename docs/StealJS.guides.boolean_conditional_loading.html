<!DOCTYPE html>
<!--####################################################################
	THIS IS A GENERATED FILE -- ANY CHANGES MADE WILL BE OVERWRITTEN

	INSTEAD CHANGE:
	source: node_modules/steal-conditional/docs/pages/boolean-conditional-loading.md
	@page StealJS.guides.boolean_conditional_loading
######################################################################## -->

<!--[if lt IE 7]>
<html class="no-js ie lt-ie9 lt-ie8 lt-ie7" lang="en">
<![endif]-->
<!--[if IE 7]>
<html class="no-js ie lt-ie9 lt-ie8" lang="en">
<![endif]-->
<!--[if IE 8]>
<html class="no-js ie lt-ie9" lang="en">
<![endif]-->
<!--[if IE 9]>
<html class="no-js ie ie9" lang="en">
<![endif]-->
<!--[if (gt IE 9)|!(IE)]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<head>
	<meta charset="utf-8">
	<title>StealJS - Boolean Conditional Loading </title>
	<meta name="description" content="">
	<meta name="author" content="">
	<meta property="og:title" content="StealJS - Boolean Conditional Loading ">
	<meta property="og:description" content="">
	<meta property="og:image" content="https://www.bitovi.com/hs-fs/hubfs/open-source/os-stealjs.png">
	<script type="application/ld+json">
		{
			"@context": "http://www.schema.org",
			"@type": "SoftwareSourceCode",
			"applicationCategory": "DeveloperApplication",
			"brand": "Bitovi",
			"category": "JavaScript Frameworks",
			"codeRepository": "https://github.com/stealjs/steal",
			"description": "",
			"image": "https://www.bitovi.com/hs-fs/hubfs/open-source/os-stealjs.png",
			"license": "https://github.com/stealjs/steal/blob/master/license.md",
			"logo": "https://www.bitovi.com/hs-fs/hubfs/open-source/os-stealjs.png",
			"name": "StealJS - Boolean Conditional Loading ",
			"programmingLanguage": "JavaScript"
		}
	</script>
	
		<link rel="stylesheet" type="text/css" href="./static/bundles/bit-docs-site/static.css">
	
	
		<script>
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
				(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
				m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

			ga('create', 'UA-2302003-20', 'auto');
			ga('send', 'pageview');
		</script>
	
	<!--[if lt IE 9]>
		<script type="text/javascript" src="static/html5shiv.js"></script>
	<![endif]-->
</head>

<body class="docs">
	
	<header>
		
		<div style="display: none;" class="navbar"></div>
		<nav class="container">
			<div class="logo-menu">
				<a class="brand" href="./index.html">StealJS</a>

				<ul class="dropdown-menu">
					<li><a href="https://donejs.com/">DoneJS</a></li>
					<li><a href="https://stealjs.com/">StealJS</a></li>
					<li><a href="https://jquerypp.com/">jQuery ++</a></li>
					<li><a href="https://funcunit.com/">FuncUnit</a></li>
					<li><a href="https://documentjs.com/">DocumentJS</a></li>
				</ul>
			</div>

			<ul class="nav">
				<li><a href="https://stealjs.com">Home</a></li>

				
          <li class="active"><a href="index.html">Api</a></li>
        

				<li><a href="https://twitter.com/stealjs">Twitter</a></li>
				<li><a href="https://github.com/stealjs/steal">GitHub</a></li>
				<li><a href="https://gitter.im/stealjs/steal">Chat</a></li>
			</ul>

			<div class="pull-right">
				<div class="bitovi-menu">
					<a href="https://www.bitovi.com" class="bitovi icon-bits">Bitovi</a>
					<ul class="dropdown-menu">
						<li><a href="https://www.bitovi.com">Bitovi.com</a></li>
						<li><a href="https://www.bitovi.com/blog">Blog</a></li>
						<li><a href="https://www.bitovi.com/design">Design</a></li>
						<li><a href="https://www.bitovi.com/development">Development</a></li>
						<li><a href="https://www.bitovi.com/training">Training</a></li>
						<li><a href="https://www.bitovi.com/open-source">Open Source</a></li>
						<li><a href="https://www.bitovi.com/about">About</a></li>
						<li><a href="https://www.bitovi.com/contact">Contact Us</a></li>
					</ul>
				</div>
			</div>
		</nav>
	</header>
	

	
<div class="container api">

	
	<nav class="sidebar">
		
		<ul class="api cascading primary-grouping">
	
		

		
			
				<li class="search-container active">
					<a
						class="sidebar-title"
						href="index.html"
						data-search="StealJS"
					>
						StealJS
					</a>
					
	
		<ul>
			
				
					
						<li class="heading search-container">
							<span>step-by-step guides</span>
							
	
		<ul>
			
				
					
					
					<li class="search-container">
						<a class="page" href="StealJS.guides.progressive_loading.html" data-search="Progressive Loading">
							Progressive Loading
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="page" href="StealJS.quick-start.html" data-search="Quick Start">
							Quick Start
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container active ">
						<a class="page" href="StealJS.guides.boolean_conditional_loading.html" data-search="Boolean Conditional Loading">
							Boolean Conditional Loading
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="page" href="StealJS.guides.substitution_conditional_loading.html" data-search="Substitution Conditional Loading">
							Substitution Conditional Loading
						</a>
					</li>
					

				
			
		</ul>
	


						</li>
					
					

				
			
				
					
						<li class="heading search-container">
							<span>development</span>
							
	
		<ul>
			
				
					
					
					<li class="search-container">
						<a class="page" href="StealJS.development-bundles.html" data-search="Development Bundles">
							Development Bundles
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="page" href="StealJS.using-npm-packages.html" data-search="Using npm Packages">
							Using npm Packages
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="page" href="StealJS.hot-module-replacement.html" data-search="Hot Module Replacement">
							Hot Module Replacement
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="page" href="StealJS.configuration.html" data-search="Configuration">
							Configuration
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="page" href="StealJS.conditionals.html" data-search="Conditional Loading">
							Conditional Loading
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="page" href="StealJS.babel.html" data-search="Babel">
							Babel
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="page" href="StealJS.circular.html" data-search="Circular Dependencies">
							Circular Dependencies
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="page" href="StealJS.error-messages.html" data-search="Error Messages">
							Error Messages
						</a>
					</li>
					

				
			
		</ul>
	


						</li>
					
					

				
			
				
					
						<li class="heading search-container">
							<span>bundling</span>
							
	
		<ul>
			
				
					
					
					<li class="search-container">
						<a class="page" href="StealJS.optimized-builds.html" data-search="Optimized Builds">
							Optimized Builds
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="page" href="steal-tools.code-splitting.html" data-search="Code Splitting">
							Code Splitting
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="page" href="steal-tools.tree-shaking.html" data-search="Tree Shaking">
							Tree Shaking
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="page" href="steal-tools.watch-mode.html" data-search="Watch Mode">
							Watch Mode
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="page" href="steal-tools.multi-main.html" data-search="Multi-main Builds">
							Multi-main Builds
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="page" href="StealJS.project-exporting.html" data-search="Project Exporting">
							Project Exporting
						</a>
					</li>
					

				
			
		</ul>
	


						</li>
					
					

				
			
				
					
						<li class="heading search-container">
							<span>production</span>
							
	
		<ul>
			
				
					
					
					<li class="search-container">
						<a class="page" href="StealJS.loading-from-cdn.html" data-search="Loading Scripts from a CDN">
							Loading Scripts from a CDN
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="page" href="StealJS.moving-to-prod.html" data-search="Moving to Production">
							Moving to Production
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="page" href="steal-bundle-manifest.server.html" data-search="Server templating in Node">
							Server templating in Node
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="page" href="steal-bundle-manifest.snippets.html" data-search="Generating HTML Snippets">
							Generating HTML Snippets
						</a>
					</li>
					

				
			
		</ul>
	


						</li>
					
					

				
			
				
					
						<li class="heading search-container">
							<span>advanced</span>
							
	
		<ul>
			
				
					
					
					<li class="search-container">
						<a class="page" href="StealJS.writing-plugins.html" data-search="Writing Plugins">
							Writing Plugins
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="page" href="steal-tools.guides.streams.html" data-search="Streaming API">
							Streaming API
						</a>
					</li>
					

				
			
		</ul>
	


						</li>
					
					

				
			
				
					
						<li class="heading search-container">
							<span>apis</span>
							
	
		<ul>
			
				
					
					
					<li class="search-container">
						<a class="page" href="steal.html" data-search="steal">
							steal
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="page" href="steal-tools.html" data-search="steal-tools">
							steal-tools
						</a>
					</li>
					

				
			
		</ul>
	


						</li>
					
					

				
			
				
					
						<li class="heading search-container">
							<span>migrating</span>
							
	
		<ul>
			
				
					
					
					<li class="search-container">
						<a class="page" href="StealJS.migrating.html" data-search="Migrating from Legacy Steal">
							Migrating from Legacy Steal
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="page" href="StealJS.topics.migrating-one.html" data-search="Migrating to StealJS 1.x">
							Migrating to StealJS 1.x
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="page" href="StealJS.topics.migrating-two.html" data-search="Migrating to StealJS 2.x">
							Migrating to StealJS 2.x
						</a>
					</li>
					

				
			
		</ul>
	


						</li>
					
					

				
			
				
					
						<li class="heading search-container">
							<span>about</span>
							
	
		<ul>
			
				
					
					
					<li class="search-container">
						<a class="page" href="StealJS.why.html" data-search="Why StealJS">
							Why StealJS
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="page" href="guides.Contributing.html" data-search="Contributing">
							Contributing
						</a>
					</li>
					

				
			
		</ul>
	


						</li>
					
					

				
			
				
					
						<li class="heading search-container">
							<span>ecosystem</span>
							
	
		<ul>
			
				
					
					
					<li class="search-container">
						<a class="module" href="grunt-steal.html" data-search="grunt-steal">
							grunt-steal
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="page" href="steal-bundle-manifest.html" data-search="steal-bundle-manifest">
							steal-bundle-manifest
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="module" href="steal-conditional.html" data-search="steal-conditional">
							steal-conditional
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="module" href="steal-css.html" data-search="steal-css">
							steal-css
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="module" href="steal-less.html" data-search="steal-less">
							steal-less
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="module" href="steal-mocha.html" data-search="steal-mocha">
							steal-mocha
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="module" href="steal-qunit.html" data-search="steal-qunit">
							steal-qunit
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="module" href="steal-socket.io.html" data-search="steal-socket.io">
							steal-socket.io
						</a>
					</li>
					

				
			
		</ul>
	


						</li>
					
					

				
			
		</ul>
	


				</li>
			
		
	
</ul>

	</nav>
	

	
	<article class="content docs">
	

		
		<section class="title">
			<div class="heading">
<h1>Boolean Conditional Loading</h1>
	<ul class="tags">
		<li>page</li>
	</ul>
	
	
</div>

<div class="sub-heading">
	
	
		<span class="module">StealJS.guides.boolean_conditional_loading</span>
	
	
	
	<span class="inherits">&nbsp;</span>
</div>

<ul class="links">
	
	
	
</ul>
<br />

		</section>
		

		
		<section class="contents">
			<div class="on-this-page-container"></div>
		</section>
		

		

		
		<section class="description">
			
		</section>
		

		
			
		

		


		
		<section class="comment">
			<!-- hack! -->
<style>.contents { display: none; }</style>
<p>StealJS supports conditional module loading through the <a href="https://github.com/stealjs/steal-conditional">steal-conditional</a> extension;
2 types of conditionals are currently supported, <a href="StealJS.guides.substitution_conditional_loading.html" title="">string substitution</a> and boolean.</p>
<p>In this guide, we'll build a small demo that uses the boolean conditional syntax to import a
<a href="https://html.spec.whatwg.org/multipage/scripting.html#custom-elements">Custom Elements V1</a> <a href="https://github.com/WebReflection/document-register-element">polyfill</a> only when the host browser doesn't support it natively.</p>
<h2>Install Prerequisites</h2>
<h3>Window Setup</h3>
<ol>
<li>Install <a href="https://nodejs.org/">NodeJS</a>.</li>
<li>Install Chocolatey, Python, Windows SDK, and Visual Studio as described <a href="http://stealjs.com/docs/guides.ContributingWindows.html">here</a>.</li>
</ol>
<h3>Linux / Mac Setup</h3>
<ol>
<li>Install <a href="https://nodejs.org/">NodeJS</a>.</li>
</ol>
<h2>Setting up a new project</h2>
<h3>Create a new project folder</h3>
<p>Create a new folder for your project and then run <code>npm init</code>. Answer all questions with their defaults.</p>
<pre><code>&gt; mkdir boolean-demo
&gt; cd boolean-demo
&gt; npm init
</code></pre>
<h3>Create and host the main page</h3>
<p>Create <em>index.html</em> with:</p>
<pre><code class="language-html">&lt;!doctype html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;&lt;/head&gt;
  &lt;body&gt;
    Hello World!
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>Next install and run a local fileserver. <a href="https://www.npmjs.com/package/http-server">http-server</a> handles our basic needs. We'll install it locally and then and it to our npm scripts:</p>
<pre><code>&gt; npm install http-server --save
</code></pre>
<p>Next edit your <code>package.json</code> so that the start script looks like:</p>
<pre><code class="language-json">&quot;scripts&quot;: {
  &quot;start&quot;: &quot;http-server -c-1&quot;
}
</code></pre>
<p>This allows us to start the server with:</p>
<pre><code>&gt; npm start
</code></pre>
<p>Open <a href="http://127.0.0.1:8080/">http://127.0.0.1:8080/</a>. You should see the <em>Hello world!</em> test.</p>
<blockquote>
<p>Before proceeding kill the development server so we can install some dependencies. Use cmd+c on Mac or ctrl+c on Windows or Linux/BSD.</p>
</blockquote>
<h3>Install the application dependencies</h3>
<p>Installing these dependencies gives us everything we need to build our application.</p>
<pre><code>&gt; npm install document-register-element --save-dev
&gt; npm install steal steal-tools steal-conditional --save-dev
</code></pre>
<h3>Set up polyfill and steal-conditional</h3>
<p>Next we need to make sure the right modules are loaded, first edit your <code>package.json</code> with the following:</p>
<pre><code class="language-json">{
  &quot;name&quot;: &quot;boolean-demo&quot;,
  &quot;steal&quot;: {
    &quot;paths&quot;: {
      &quot;document-register-element&quot;: &quot;./node_modules/document-register-element/build/document-register-element.js&quot;
    }
  }
}
</code></pre>
<p><span line-highlight='3-7'></span>
We are using <a href="http://stealjs.com/docs/config.paths.html">StealJS' paths</a> configuration to make sure the browser version of the
polyfill is loaded.</p>
<p>Then, we configure StealJS to load the <code>steal-conditional</code> extension as a <a href="https://stealjs.com/docs/npm.html#packagestealconfigdependencies">configuration dependency</a>; in your <code>package.json</code> add the following:</p>
<pre><code class="language-json">{
  &quot;name&quot;: &quot;boolean-demo&quot;,
  &quot;steal&quot;: {
    &quot;paths&quot;: { ... },
    &quot;configDependencies&quot;: [
      &quot;./node_modules/steal-conditional/conditional.js&quot;
    ]
  }
}
</code></pre>
<p><span line-highlight='5-7'></span>
Now restart your server; you can keep it on while you develop the rest of the application.</p>
<pre><code>&gt; npm start
</code></pre>
<h2>Import your first module</h2>
<h3>Create the module</h3>
<p>Create <em>index.js</em> with the following:</p>
<pre><code class="language-js">import &quot;document-register-element&quot;;

function MyElement() {
  return Reflect.construct(HTMLElement, arguments, MyElement);
}

MyElement.prototype = Object.create(HTMLElement.prototype);
MyElement.prototype.constructor = MyElement;

MyElement.prototype.connectedCallback = function() {
  this.appendChild(this._makeLinkElement());
};

MyElement.prototype._makeLinkElement = function() {
  let link = document.createElement(&quot;a&quot;);

  link.href = this.getAttribute(&quot;url&quot;);
  link.appendChild(this._makeFigureElement());

  return link;
};

MyElement.prototype._makeFigureElement = function() {
  let figure = document.createElement(&quot;figure&quot;);

  figure.appendChild(this._makeImageElement());
  figure.appendChild(this._makeCaptionElement());

  return figure;
};

MyElement.prototype._makeImageElement = function() {
  let img = document.createElement(&quot;img&quot;);

  img.alt = this.getAttribute(&quot;name&quot;);
  img.src = this.getAttribute(&quot;img-url&quot;);

  return img;
};

MyElement.prototype._makeCaptionElement = function() {
  let caption = document.createElement(&quot;figcaption&quot;);

  caption.innerText = this.getAttribute(&quot;caption&quot;);
  return caption;
};

customElements.define(&quot;my-element&quot;, MyElement);
</code></pre>
<p>Yikes! that's a lot of code there! But bear with me, let's break it up in smaller pieces and figure out what's going on:</p>
<pre><code class="language-js">import &quot;document-register-element&quot;;

function MyElement() {
  return Reflect.construct(HTMLElement, arguments, MyElement);
}

MyElement.prototype = Object.create(HTMLElement.prototype);
MyElement.prototype.constructor = MyElement;
</code></pre>
<p>First, we import the polyfill, notice we are using the regular <code>import</code> syntax
here, we'll change it in a moment to use the <code>steal-conditional</code> boolean syntax; the rest of the code is defining the custom element constructor function.</p>
<p>Next, we define the <code>connectedCallback</code> function:</p>
<pre><code>MyElement.prototype.connectedCallback = function() {
  this.appendChild(this._makeLinkElement());
};
</code></pre>
<p>the <code>connectedCallback</code> function is called every time the element is inserted into the DOM.</p>
<p>The following functions with <code>_</code> in their names (e.g: <code>_makeLinkElement</code>) are used during rendering and the naming choice is to indicate that these are private methods that shouldn't be used by the custom element's consumer.</p>
<p>Finally, and probably the most interesting piece of the code:</p>
<pre><code class="language-js">customElements.define(&quot;my-element&quot;, MyElement);
</code></pre>
<p>This is where the custom element is actually defined, and the whole reason why we
might need to load the polyfill.</p>
<h3>Use steal.js in your page</h3>
<p>Update <em>index.html</em> with:</p>
<pre><code class="language-html">&lt;!doctype html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;&lt;/head&gt;
  &lt;body&gt;
    &lt;script src=&quot;./node_modules/steal/steal.js&quot;&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p><span line-highlight='5'></span></p>
<h3>Add custom element to your page</h3>
<p>Next, add the custom element to the <em>index.html</em> page:</p>
<pre><code class="language-html">&lt;!doctype html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;&lt;/head&gt;
  &lt;body&gt;
    &lt;my-element
      name=&quot;DoneJS&quot;
      url=&quot;https://donejs.com/&quot;
      caption=&quot;Your App. Done.&quot;
      img-url=&quot;http://donejs.com/static/img/donejs-logo-white.svg&quot;
    &gt;
    &lt;/my-element&gt;
    &lt;script src=&quot;./node_modules/steal/steal.js&quot;&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p><span line-highlight='5-11'></span>
Reload <em>index.html</em> to see your changes.</p>
<h2>Use steal-conditional boolean syntax</h2>
<p>One issue with our current code is that the polyfill is loaded every time, even when the browser already supports the Custom Elements V1 api. We cannot afford wasting precious time and resources to download code that's not needed.</p>
<p>The goal here is to detect whether the browser already supports the feature and only
load the polyfill when it's needed.</p>
<h3>The boolean conditional syntax</h3>
<p>Let's change the <code>import</code> in <em>index.js</em> to look like this:</p>
<pre><code class="language-js">import &quot;document-register-element#?needs-polyfill&quot;;
</code></pre>
<p>This should look a little bit weird to you, if it doesn't, you might want to read this <a href="http://www.2ality.com/2014/09/es6-modules-final.html">article first</a>.</p>
<p>The part before the <code>#?</code> is the polyfill package name we had before, the interesting bit is the text after; <code>needs-polyfill</code> is a module name, the <code>steal-conditional</code> extension will load it first and grab <a href="https://developer.mozilla.org/en/docs/web/javascript/reference/statements/export#Using_the_default_export">its default export</a>; if the value is not a boolean it will throw an error, otherwise <code>document-register-element</code> will only be loaded if the value is <code>true</code>.</p>
<blockquote>
<p>It is also possible to negate conditionals via:</p>
<pre><code class="language-js">import &quot;document-register-element#?~supports-custom-elements&quot;;
</code></pre>
<p>See <code>steal-conditional</code>'s <a href="https://github.com/stealjs/steal-conditional/blob/master/README.md">README</a> for more details.</p>
</blockquote>
<h3>Create the condition module</h3>
<p>Create <em>needs-polyfill.js</em> with:</p>
<pre><code class="language-js">export default typeof customElements === &quot;undefined&quot;;
</code></pre>
<p>Reload <em>index.html</em> to see your changes.</p>
<p><img src="https://cloud.githubusercontent.com/assets/724877/21654142/0711aec2-d293-11e6-90f2-ad2e61d9b1cb.png" alt="screen shot 2017-01-04 at 15 24 17" /></p>
<p>In the screenshot above, there is Chrome on the left (Version 55.0.2883.95) and Firefox on the right (Version 50.0.2), highlighted on blue is the request of the
condition module which happens on both browsers, in our example that's the <code>needs-polyfill</code> module, then highlighted on red is the request to load the polyfill which only happens in Firefox which (for the tested version) doesn't support the Custom Elements V1 api.</p>
<h2>Build a production app</h2>
<p>Now that we've created our application we need to share it with the public. To do this we'll create a build that will concat our JavaScript and styles down to only one file, each, for faster page loads in production.</p>
<h3>Build the app and switch to production</h3>
<p>When we first installed our initial dependencies for myhub, one of those was <em>steal-tools</em>. steal-tools is a set of tools that helps with bundling assets for production use.</p>
<p>In your package.json <code>&quot;scripts&quot;</code> section add:</p>
<pre><code class="language-json">{
  &quot;scripts&quot;: {
    ...
    &quot;build&quot;: &quot;steal-tools&quot;
  }
}
</code></pre>
<p>And then you can run:</p>
<pre><code>&gt; npm run build
</code></pre>
<p>To use the production artifacts rather than the development files we need to update our index.html to load them.</p>
<p>Update <em>index.html</em> with:</p>
<pre><code class="language-html">&lt;!doctype html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;&lt;/head&gt;
  &lt;body&gt;
    &lt;my-element
      name=&quot;DoneJS&quot;
      url=&quot;https://donejs.com/&quot;
      caption=&quot;Your App. Done.&quot;
      img-url=&quot;http://donejs.com/static/img/donejs-logo-white.svg&quot;
    &gt;
    &lt;/my-element&gt;
    &lt;script src=&quot;./dist/steal.production.js&quot;&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p><span line-highlight='12'></span>
By using <code>steal.production.js</code> instead of <code>steal.js</code> StealJS will know to load the production files we just built.</p>
<h3>A bundle for each conditional module</h3>
<p>During the build, <code>steal-tools</code> will create separate bundles for each conditionally loaded module, this way only browsers without support will get the penalty of downloading and parsing the polyfill code.</p>
<p>If we take a look at the artifacts created during the build process</p>
<p><img src="https://cloud.githubusercontent.com/assets/724877/21659600/49193da0-d2aa-11e6-8e74-f44b07f38cd9.png" alt="screen shot 2017-01-04 at 16 13 00" /></p>
<p>We can see (the red hightlighted box) the bundle created for the <code>document-register-element</code> polyfill module.</p>
<p>If we reload <em>index.html</em> and inspect the network tab, we'll notice that the polyfill bundle is only loaded in Firefox.</p>
<p><img src="https://cloud.githubusercontent.com/assets/724877/21659847/5098a754-d2ab-11e6-8f67-98fcaa34b120.png" alt="screen shot 2017-01-04 at 18 24 40" /></p>

		</section>
		
		

		

		

	
	</article>
	


</div>


<survey-ad>
  <button aria-label="Close" class="close" type="button">
    <span aria-hidden="true">&times;</span>
  </button>
  <a href="https://donejs.com/survey.html" target="_blank">
    Help us improve StealJS by taking our community survey
  </a>
</survey-ad>


	
	<footer>
		<nav class="container">
			<a class="brand javascriptmvc" href="index.html"></a>
		</nav>
	</footer>
	

	<script type="text/javascript">
		var docObject = {"src":{"path":"node_modules/steal-conditional/docs/pages/boolean-conditional-loading.md"},"description":"\n","name":"StealJS.guides.boolean_conditional_loading","title":"Boolean Conditional Loading","type":"page","parent":"StealJS.guides","outline":{"depth":0},"comment":" ","pathToRoot":".."};
	</script>

	
		<script>
		  steal = {
		    instantiated: {
		      "bundles/bit-docs-site/static.css!$css" : null
		    }
		  }
		</script>
		<script type='text/javascript'
				data-main="bit-docs-site/static"
				src="./static/node_modules/steal/steal.production.js"></script>
	
</body>

</html>
