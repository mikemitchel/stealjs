<!DOCTYPE html>
<!--####################################################################
	THIS IS A GENERATED FILE -- ANY CHANGES MADE WILL BE OVERWRITTEN

	INSTEAD CHANGE:
	source: doc/steal-topics/guides/progressive-loading.md
	@page StealJS.guides.progressive_loading
######################################################################## -->

<!--[if lt IE 7]>
<html class="no-js ie lt-ie9 lt-ie8 lt-ie7" lang="en">
<![endif]-->
<!--[if IE 7]>
<html class="no-js ie lt-ie9 lt-ie8" lang="en">
<![endif]-->
<!--[if IE 8]>
<html class="no-js ie lt-ie9" lang="en">
<![endif]-->
<!--[if IE 9]>
<html class="no-js ie ie9" lang="en">
<![endif]-->
<!--[if (gt IE 9)|!(IE)]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<head>
	<meta charset="utf-8">
	<title>StealJS - Progressive Loading </title>
	<meta name="description" content="">
	<meta name="author" content="">
	<meta property="og:title" content="StealJS - Progressive Loading ">
	<meta property="og:description" content="">
	<meta property="og:image" content="https://www.bitovi.com/hs-fs/hubfs/open-source/os-stealjs.png">
	<script type="application/ld+json">
		{
			"@context": "http://www.schema.org",
			"@type": "SoftwareSourceCode",
			"applicationCategory": "DeveloperApplication",
			"brand": "Bitovi",
			"category": "JavaScript Frameworks",
			"codeRepository": "https://github.com/stealjs/steal",
			"description": "",
			"image": "https://www.bitovi.com/hs-fs/hubfs/open-source/os-stealjs.png",
			"license": "https://github.com/stealjs/steal/blob/master/license.md",
			"logo": "https://www.bitovi.com/hs-fs/hubfs/open-source/os-stealjs.png",
			"name": "StealJS - Progressive Loading ",
			"programmingLanguage": "JavaScript"
		}
	</script>
	
		<link rel="stylesheet" type="text/css" href="./static/bundles/bit-docs-site/static.css">
	
	
		<script>
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
				(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
				m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

			ga('create', 'UA-2302003-20', 'auto');
			ga('send', 'pageview');
		</script>
	
	<!--[if lt IE 9]>
		<script type="text/javascript" src="static/html5shiv.js"></script>
	<![endif]-->
</head>

<body class="docs">
	
	<header>
		
		<div style="display: none;" class="navbar"></div>
		<nav class="container">
			<div class="logo-menu">
				<a class="brand" href="./index.html">StealJS</a>

				<ul class="dropdown-menu">
					<li><a href="https://donejs.com/">DoneJS</a></li>
					<li><a href="https://stealjs.com/">StealJS</a></li>
					<li><a href="https://jquerypp.com/">jQuery ++</a></li>
					<li><a href="https://funcunit.com/">FuncUnit</a></li>
					<li><a href="https://documentjs.com/">DocumentJS</a></li>
				</ul>
			</div>

			<ul class="nav">
				<li><a href="https://stealjs.com">Home</a></li>

				
          <li class="active"><a href="index.html">Api</a></li>
        

				<li><a href="https://twitter.com/stealjs">Twitter</a></li>
				<li><a href="https://github.com/stealjs/steal">GitHub</a></li>
				<li><a href="https://gitter.im/stealjs/steal">Chat</a></li>
			</ul>

			<div class="pull-right">
				<div class="bitovi-menu">
					<a href="https://www.bitovi.com" class="bitovi icon-bits">Bitovi</a>
					<ul class="dropdown-menu">
						<li><a href="https://www.bitovi.com">Bitovi.com</a></li>
						<li><a href="https://www.bitovi.com/blog">Blog</a></li>
						<li><a href="https://www.bitovi.com/design">Design</a></li>
						<li><a href="https://www.bitovi.com/development">Development</a></li>
						<li><a href="https://www.bitovi.com/training">Training</a></li>
						<li><a href="https://www.bitovi.com/open-source">Open Source</a></li>
						<li><a href="https://www.bitovi.com/about">About</a></li>
						<li><a href="https://www.bitovi.com/contact">Contact Us</a></li>
					</ul>
				</div>
			</div>
		</nav>
	</header>
	

	
<div class="container api">

	
	<nav class="sidebar">
		
		<ul class="api cascading primary-grouping">
	
		

		
			
				<li class="search-container active">
					<a
						class="sidebar-title"
						href="index.html"
						data-search="StealJS"
					>
						StealJS
					</a>
					
	
		<ul>
			
				
					
						<li class="heading search-container">
							<span>step-by-step guides</span>
							
	
		<ul>
			
				
					
					
					<li class="search-container active ">
						<a class="page" href="StealJS.guides.progressive_loading.html" data-search="Progressive Loading">
							Progressive Loading
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="page" href="StealJS.quick-start.html" data-search="Quick Start">
							Quick Start
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="page" href="StealJS.guides.boolean_conditional_loading.html" data-search="Boolean Conditional Loading">
							Boolean Conditional Loading
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="page" href="StealJS.guides.substitution_conditional_loading.html" data-search="Substitution Conditional Loading">
							Substitution Conditional Loading
						</a>
					</li>
					

				
			
		</ul>
	


						</li>
					
					

				
			
				
					
						<li class="heading search-container">
							<span>development</span>
							
	
		<ul>
			
				
					
					
					<li class="search-container">
						<a class="page" href="StealJS.development-bundles.html" data-search="Development Bundles">
							Development Bundles
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="page" href="StealJS.using-npm-packages.html" data-search="Using npm Packages">
							Using npm Packages
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="page" href="StealJS.hot-module-replacement.html" data-search="Hot Module Replacement">
							Hot Module Replacement
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="page" href="StealJS.configuration.html" data-search="Configuration">
							Configuration
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="page" href="StealJS.conditionals.html" data-search="Conditional Loading">
							Conditional Loading
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="page" href="StealJS.babel.html" data-search="Babel">
							Babel
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="page" href="StealJS.circular.html" data-search="Circular Dependencies">
							Circular Dependencies
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="page" href="StealJS.error-messages.html" data-search="Error Messages">
							Error Messages
						</a>
					</li>
					

				
			
		</ul>
	


						</li>
					
					

				
			
				
					
						<li class="heading search-container">
							<span>bundling</span>
							
	
		<ul>
			
				
					
					
					<li class="search-container">
						<a class="page" href="StealJS.optimized-builds.html" data-search="Optimized Builds">
							Optimized Builds
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="page" href="steal-tools.code-splitting.html" data-search="Code Splitting">
							Code Splitting
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="page" href="steal-tools.tree-shaking.html" data-search="Tree Shaking">
							Tree Shaking
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="page" href="steal-tools.watch-mode.html" data-search="Watch Mode">
							Watch Mode
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="page" href="steal-tools.multi-main.html" data-search="Multi-main Builds">
							Multi-main Builds
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="page" href="StealJS.project-exporting.html" data-search="Project Exporting">
							Project Exporting
						</a>
					</li>
					

				
			
		</ul>
	


						</li>
					
					

				
			
				
					
						<li class="heading search-container">
							<span>production</span>
							
	
		<ul>
			
				
					
					
					<li class="search-container">
						<a class="page" href="StealJS.loading-from-cdn.html" data-search="Loading Scripts from a CDN">
							Loading Scripts from a CDN
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="page" href="StealJS.moving-to-prod.html" data-search="Moving to Production">
							Moving to Production
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="page" href="steal-bundle-manifest.server.html" data-search="Server templating in Node">
							Server templating in Node
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="page" href="steal-bundle-manifest.snippets.html" data-search="Generating HTML Snippets">
							Generating HTML Snippets
						</a>
					</li>
					

				
			
		</ul>
	


						</li>
					
					

				
			
				
					
						<li class="heading search-container">
							<span>advanced</span>
							
	
		<ul>
			
				
					
					
					<li class="search-container">
						<a class="page" href="StealJS.writing-plugins.html" data-search="Writing Plugins">
							Writing Plugins
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="page" href="steal-tools.guides.streams.html" data-search="Streaming API">
							Streaming API
						</a>
					</li>
					

				
			
		</ul>
	


						</li>
					
					

				
			
				
					
						<li class="heading search-container">
							<span>apis</span>
							
	
		<ul>
			
				
					
					
					<li class="search-container">
						<a class="page" href="steal.html" data-search="steal">
							steal
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="page" href="steal-tools.html" data-search="steal-tools">
							steal-tools
						</a>
					</li>
					

				
			
		</ul>
	


						</li>
					
					

				
			
				
					
						<li class="heading search-container">
							<span>migrating</span>
							
	
		<ul>
			
				
					
					
					<li class="search-container">
						<a class="page" href="StealJS.migrating.html" data-search="Migrating from Legacy Steal">
							Migrating from Legacy Steal
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="page" href="StealJS.topics.migrating-one.html" data-search="Migrating to StealJS 1.x">
							Migrating to StealJS 1.x
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="page" href="StealJS.topics.migrating-two.html" data-search="Migrating to StealJS 2.x">
							Migrating to StealJS 2.x
						</a>
					</li>
					

				
			
		</ul>
	


						</li>
					
					

				
			
				
					
						<li class="heading search-container">
							<span>about</span>
							
	
		<ul>
			
				
					
					
					<li class="search-container">
						<a class="page" href="StealJS.why.html" data-search="Why StealJS">
							Why StealJS
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="page" href="guides.Contributing.html" data-search="Contributing">
							Contributing
						</a>
					</li>
					

				
			
		</ul>
	


						</li>
					
					

				
			
				
					
						<li class="heading search-container">
							<span>ecosystem</span>
							
	
		<ul>
			
				
					
					
					<li class="search-container">
						<a class="module" href="grunt-steal.html" data-search="grunt-steal">
							grunt-steal
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="page" href="steal-bundle-manifest.html" data-search="steal-bundle-manifest">
							steal-bundle-manifest
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="module" href="steal-conditional.html" data-search="steal-conditional">
							steal-conditional
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="module" href="steal-css.html" data-search="steal-css">
							steal-css
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="module" href="steal-less.html" data-search="steal-less">
							steal-less
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="module" href="steal-mocha.html" data-search="steal-mocha">
							steal-mocha
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="module" href="steal-qunit.html" data-search="steal-qunit">
							steal-qunit
						</a>
					</li>
					

				
			
				
					
					
					<li class="search-container">
						<a class="module" href="steal-socket.io.html" data-search="steal-socket.io">
							steal-socket.io
						</a>
					</li>
					

				
			
		</ul>
	


						</li>
					
					

				
			
		</ul>
	


				</li>
			
		
	
</ul>

	</nav>
	

	
	<article class="content docs">
	

		
		<section class="title">
			<div class="heading">
<h1>Progressive Loading</h1>
	<ul class="tags">
		<li>page</li>
	</ul>
	
	
</div>

<div class="sub-heading">
	
	
		<span class="module">StealJS.guides.progressive_loading</span>
	
	
	
	<span class="inherits">&nbsp;</span>
</div>

<ul class="links">
	
	
	
</ul>
<br />

		</section>
		

		
		<section class="contents">
			<div class="on-this-page-container"></div>
		</section>
		

		

		
		<section class="description">
			
		</section>
		

		
			
		

		


		
		<section class="comment">
			<!-- hack! -->
<style>.contents { display: none; }</style>
<p>If you've tried the <a href="./StealJS.quick-start.html">Quick Start</a> guide you've seen a taste of what it's like to use StealJS.</p>
<p>This guide expands upon the quick start guide to give a full example of using Steal's primary feature, progressive loading, to build a single page application that loads only what is necessary.</p>
<p>This will be demonstrated by creating a small sample application called <strong>myhub</strong>.</p>
<h2>Install Prerequisites</h2>
<h3>Window Setup</h3>
<ol>
<li>Install <a href="https://nodejs.org/">NodeJS</a>.</li>
<li>Install Chocolatey, Python, Windows SDK, and Visual Studio as described <a href="http://stealjs.com/docs/guides.ContributingWindows.html">here</a>.</li>
</ol>
<h3>Linux / Mac Setup</h3>
<ol>
<li>Install <a href="https://nodejs.org/">NodeJS</a>.</li>
</ol>
<h2>Setting up a new project</h2>
<h3>Create a new project folder</h3>
<p>Create a new folder for your project and then run <code>npm init</code>. Answer all questions with their defaults.</p>
<pre><code>&gt; mkdir myhub
&gt; cd myhub
&gt; npm init
</code></pre>
<p><img width="682" alt="screen shot 2016-10-31 at 3 21 49 pm" src="https://cloud.githubusercontent.com/assets/361671/19868287/c926dcec-9f7d-11e6-97e5-9b0ece2165ee.png"></p>
<h3>Create and host the main page</h3>
<p>Create <em>myhub.html</em> with:</p>
<pre><code class="language-html">&lt;!doctype html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;&lt;/head&gt;
  &lt;body&gt;
    &lt;div class=&quot;container&quot;&gt;Hello World.&lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>Next install and run a local fileserver. <a href="https://www.npmjs.com/package/http-server">http-server</a> handles our basic needs. We'll install it locally and then and it to our npm scripts:</p>
<pre><code>&gt; npm install http-server --save-dev
</code></pre>
<p>Next edit your <code>package.json</code> so that the start script looks like:</p>
<pre><code class="language-json">{
  &quot;name&quot;: &quot;myhub&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;description&quot;: &quot;&quot;,
  &quot;main&quot;: &quot;index.js&quot;,
  &quot;scripts&quot;: {
    &quot;start&quot;: &quot;http-server -c-1 .&quot;
  },
  &quot;author&quot;: &quot;&quot;,
  &quot;license&quot;: &quot;ISC&quot;,
  &quot;devDependencies&quot;: {
    &quot;http-server&quot;: &quot;^0.10.0&quot;
  }
}
</code></pre>
<p><span line-highlight='6-8,only'></span>
This allows us to start the server with:</p>
<pre><code>&gt; npm start
</code></pre>
<p>Open <a href="http://127.0.0.1:8080/myhub.html">http://127.0.0.1:8080/myhub.html</a>. You should see the <em>Hello world!</em> test.</p>
<blockquote>
<p>Before proceeding open a new command-line
terminal that will be used for additional
<code>npm install</code> commands.</p>
</blockquote>
<h3>Install steal, steal-tools, and jquery</h3>
<p>Installing these 3 dependencies gives us everything we need to build our application.</p>
<pre><code>&gt; npm install steal jquery --save-dev
&gt; npm install steal-tools steal-less steal-css --save-dev
</code></pre>
<h2>Import your first module</h2>
<h3>Create the module</h3>
<p>Create <em>myhub.js</em> with the following:</p>
<pre><code class="language-js">import $ from &quot;jquery&quot;;

$(&quot;body&quot;).html(&quot;&lt;h1&gt;Goodbye script tags!&lt;/h1&gt;&quot;);
</code></pre>
<h3>Use steal.js in your page</h3>
<p>Update <em>myhub.html</em> with:</p>
<pre><code class="language-html">&lt;!doctype html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;&lt;/head&gt;
  &lt;body&gt;
    &lt;div class=&quot;container&quot;&gt;Hello World.&lt;/div&gt;
    &lt;script src=&quot;./node_modules/steal/steal.js&quot; main&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p><span line-highlight='6'></span></p>
<h3>Update package.json with the right main</h3>
<p>Update <em>package.json</em> to:</p>
<pre><code class="language-json">{
  &quot;name&quot;: &quot;myhub&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;description&quot;: &quot;&quot;,
  &quot;main&quot;: &quot;myhub.js&quot;,
  &quot;scripts&quot;: {
    &quot;start&quot;: &quot;http-server -c-1 .&quot;
  },
  &quot;author&quot;: &quot;&quot;,
  &quot;license&quot;: &quot;ISC&quot;,
  &quot;devDependencies&quot;: {
    &quot;http-server&quot;: &quot;^0.10.0&quot;,
    &quot;jquery&quot;: &quot;^3.2.1&quot;,
    &quot;steal&quot;: &quot;^2.1.1&quot;,
    &quot;steal-css&quot;: &quot;^1.3.1&quot;,
    &quot;steal-less&quot;: &quot;^1.2.0&quot;,
    &quot;steal-tools&quot;: &quot;^1.8.4&quot;
  }
}
</code></pre>
<p><span line-highlight='5,only'></span></p>
<p>Reload <a href="http://127.0.0.1:8080/myhub.html">http://127.0.0.1:8080/myhub.html</a> to see your changes.</p>
<h2>Import styles</h2>
<p>What's an application without a little bit of flare? Steal allows using <a href="http://lesscss.org/">less</a> through <a href="https://github.com/stealjs/steal-less">steal-less</a>, which we installed earlier.</p>
<h3>Update package.json</h3>
<p>We need to update our package.json to specify the <em>plugins</em> that need to be loaded:</p>
<pre><code class="language-json">{
  &quot;name&quot;: &quot;myhub&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;description&quot;: &quot;&quot;,
  &quot;main&quot;: &quot;myhub.js&quot;,
  &quot;scripts&quot;: {
    &quot;start&quot;: &quot;http-server -c-1 .&quot;
  },
  &quot;author&quot;: &quot;&quot;,
  &quot;license&quot;: &quot;ISC&quot;,
  &quot;devDependencies&quot;: {
    &quot;http-server&quot;: &quot;^0.10.0&quot;,
    &quot;jquery&quot;: &quot;^3.2.1&quot;,
    &quot;steal&quot;: &quot;^2.1.1&quot;,
    &quot;steal-css&quot;: &quot;^1.3.1&quot;,
    &quot;steal-less&quot;: &quot;^1.2.0&quot;,
    &quot;steal-tools&quot;: &quot;^1.8.4&quot;
  },
  &quot;steal&quot;: {
    &quot;plugins&quot;: [
      &quot;steal-css&quot;,
      &quot;steal-less&quot;
    ]
  }
}
</code></pre>
<p><span line-highlight='19-24,only'></span></p>
<h3>Create and import a less file</h3>
<p>Create <em>myhub.less</em> with:</p>
<pre><code class="language-less">body h1 {
    color: #2193C4;
}
</code></pre>
<p>Import it with the following updated <em>myhub.js</em>:</p>
<pre><code class="language-js">import $ from &quot;jquery&quot;;
import &quot;./myhub.less&quot;;

$(&quot;body&quot;).html(&quot;&lt;h1&gt;Goodbye script tags!&lt;/h1&gt;&quot;);
</code></pre>
<p><span line-highlight='2'></span>
Each string used to import such as <code>&quot;jquery&quot;</code> and <code>&quot;./myhub.less&quot;</code> are called <a href="moduleIdentifier.html" title="">module identifiers</a>. They identify a module to be imported within the context of the module that is importing them. That means that when you import a module like <code>&quot;./myhub.less&quot;</code> you are importing that module relative to the current module (in this case it is your myhub.js module).</p>
<p>Internally Steal resolves all module identifiers into <a href="moduleName.html" title="">moduleNames</a>, which it uses as the <strong>key</strong> to look up modules. This allows you to load modules from many different places in the application and have them all resolve to the same module.</p>
<h3>Install and import bootstrap</h3>
<p>Next, install bootstrap:</p>
<pre><code>&gt; npm install bootstrap --save-dev
</code></pre>
<p>Update the <em>myhub.html</em> to use bootstrap:</p>
<pre><code class="language-html">&lt;!doctype html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
      &lt;meta charset=&quot;utf-8&quot;&gt;
      &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;
      &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div class=&quot;container&quot;&gt;Hello World.&lt;/div&gt;
    &lt;script src=&quot;./node_modules/steal/steal.js&quot; main&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p><span line-highlight='4-6'></span>
Import bootstrap and use it with the following updated <em>myhub.js</em>:</p>
<pre><code class="language-js">import $ from &quot;jquery&quot;;
import &quot;./myhub.less&quot;;
import &quot;bootstrap/dist/css/bootstrap.css&quot;;

$(&quot;body&quot;).append(`
    &lt;div class=&quot;container&quot;&gt;
        &lt;h1&gt;Goodbye script tags!&lt;/h1&gt;
    &lt;/div&gt;
`);
</code></pre>
<p><span line-highlight='3,5-9'></span>
Steal is able to load npm packages as modules thanks to the <a href="npm.html" title="">npm</a> plugin that comes with Steal by default.</p>
<p>If the package uses a module format, all you have to do is <code>import</code> in the <code>.js</code> file(s) where that module needs to be used.</p>
<h2>Create a modlet</h2>
<p>Steal encourages the use of <a href="https://www.bitovi.com/blog/modlet-workflows">modlets</a> as a unit of functionality in your application.</p>
<p>A modlet is a folder that contains:</p>
<ul>
<li>an implementation file,</li>
<li>a test,</li>
<li>a test page,</li>
<li>a demo page,</li>
<li>and documentation about the modlet.</li>
</ul>
<p>Using modlets helps to ensure that your application is well tested.</p>
<p>For example, instead of something like:</p>
<pre><code>.
├── myhub.html
├── myhub.js
├── myhub.less
├── package.json
├── puppies.html
├── test.js
└── weather.html
</code></pre>
<p>With modlets we will have exactly this:</p>
<pre><code>.
├── myhub.html
├── myhub.js
├── myhub.less
├── package.json
├── puppies
│   ├── puppies-test.html
│   ├── puppies-test.js
│   ├── puppies.css
│   ├── puppies.html
│   └── puppies.js
└── weather
    ├── weather-test.html
    ├── weather-test.js
    ├── weather.css
    ├── weather.html
    └── weather.js
</code></pre>
<p>Use this workflow to create the <code>weather</code> modlet:</p>
<h3>Create the demo page</h3>
<p>Create <em>weather/weather.html</em> with:</p>
<pre><code class="language-html">&lt;!doctype html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
      &lt;meta charset=&quot;utf-8&quot;&gt;
      &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;
      &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div id=&quot;weather&quot;&gt;&lt;/div&gt;
    &lt;script src=&quot;../node_modules/steal/steal.js&quot;&gt;&lt;/script&gt;
    &lt;script type=&quot;text/steal-module&quot;&gt;
        import weather from &quot;myhub/weather/weather&quot;;
        weather(&quot;#weather&quot;);
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h3>Add the weather styles</h3>
<p>Create <em>weather/weather.css</em> with:</p>
<pre><code class="language-css">@font-face {
  font-family: 'weather-widget';
  src: url(&quot;data:application/x-font-ttf;charset=utf-8;base64,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&quot;) format('truetype');
  font-weight: normal;
  font-style: normal;
}

.forecast ul {
  padding: 0;
  margin: 0;
}
.forecast ul li {
  border: 1px solid rgba(167, 207, 250, 0.7);
  border-bottom: none;
  display: flex;
  align-items: center;
  justify-content: center;
  list-style-type: none;
  padding: 10px 8px;
}
.forecast ul li:last-of-type {
  border-bottom: 1px solid rgba(167, 207, 250, 0.7);
}
.forecast .date {
  display: inline-block;
  color: #A7CFFA;
  font-size: 0.7em;
  letter-spacing: 1px;
  text-transform: uppercase;
  width: 20%;
  margin-right: 4%;
}
.forecast .description {
  display: inline-block;
  padding-left: 40px;
  margin-right: 5%;
  width: 33%;
  position: relative;
}
.forecast .description:before {
  font-family: 'weather-widget';
  font-size: 1.4em;
  left: 0;
  position: absolute;
}
.forecast .description.snow:before {
  content: &quot;\e902&quot;;
}
.forecast .description.thunderstorms:before {
  content: &quot;\e901&quot;;
}
.forecast .description.rain:before {
  content: &quot;\e903&quot;;
}
.forecast .description.rain-and-snow:before {
  content: &quot;\e90c&quot;;
}
.forecast .description.scattered-showers:before {
  content: &quot;\e90b&quot;;
}
.forecast .description.showers:before {
  content: &quot;\e904&quot;;
}
.forecast .description.scattered-thunderstorms:before {
  content: &quot;\e905&quot;;
}
.forecast .description.cloudy:before {
  content: &quot;\e90a&quot;;
}
.forecast .description.partly-cloudy:before {
  content: &quot;\e906&quot;;
}
.forecast .description.mostly-cloudy:before {
  content: &quot;\e902&quot;;
}
.forecast .description.sunny:before {
  content: &quot;\e907&quot;;
}
.forecast .description.mostly-sunny:before {
  content: &quot;\e908&quot;;
}
.forecast .description.breezy:before {
  content: &quot;\e90d&quot;;
}
.forecast .description.windy:before {
  content: &quot;\e909&quot;;
}
.forecast .low-temp,
.forecast .high-temp {
  display: inline-block;
  font-weight: 300;
  font-size: 1.2em;
  width: 10%;
  margin-left: 3%;
}
.forecast .low-temp sup,
.forecast .high-temp sup {
  font-size: 60%;
  margin-left: 3px;
}
.forecast .low-temp:before,
.forecast .high-temp:before {
  font-size: 0.6em;
  margin-right: 3px;
  color: #A7CFFA;
}
.forecast .high-temp:before {
  content: &quot;\2191&quot;;
  color: #FD6565;
}
.forecast .low-temp:before {
  content: &quot;\2193&quot;;
  color: #23e0ae;
}
</code></pre>
<h3>Create the module implementation</h3>
<p>Create <em>weather/weather.js</em> with the following code:</p>
<pre><code class="language-js">import $ from &quot;jquery&quot;;
import &quot;bootstrap/dist/css/bootstrap.css&quot;;
import &quot;./weather.css&quot;;

function toClassName(txt) {
  return txt.toLowerCase().replace(/ /g, &quot;-&quot;);
}

export default function(selector){
    var city = &quot;chicago il&quot;;
    $(selector).html(&quot;Loading...&quot;);
    $.ajax({
        url: `https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20weather.forecast%20where%20woeid%20in%20(select%20woeid%20from%20geo.places%20where%20text%3D%22${city}%22)&amp;format=json&amp;diagnostics=true&amp;callback=`,
    }).then(function(response){
      var weather = response.query.results.channel;
      var forecast = weather.item.forecast;
      var defs = forecast.map(function(day){
        return `
          &lt;li&gt;
            &lt;span class=&quot;date&quot;&gt;${day.date}&lt;/span&gt;
            &lt;span class=&quot;description ${toClassName(day.text)}&quot;&gt;${day.text}&lt;/span&gt;
            &lt;span class=&quot;high-temp&quot;&gt;${day.high}&lt;sup&gt;&amp;deg;&lt;/sup&gt;&lt;/span&gt;
            &lt;span class=&quot;low-temp&quot;&gt;${day.low}&lt;sup&gt;&amp;deg;&lt;/sup&gt;&lt;/span&gt;
          &lt;/li&gt;
        `;
      });
      $(selector).html(`
        &lt;div class=&quot;forecast&quot;&gt;
          &lt;ul&gt;
            ${defs.join(&quot;&quot;)}
          &lt;/ul&gt;
        &lt;/div&gt;
      `);
    });

}
</code></pre>
<p>Update the <code>city</code> variable with your city so the weather page will display your city's weather.</p>
<p>Open <a href="http://127.0.0.1:8080/weather/weather.html">http://127.0.0.1:8080/weather/weather.html</a> to see
the <strong>weather</strong> widget's demo page.</p>
<h3>Create the test page</h3>
<p>Create <em>weather/weather-test.html</em> with:</p>
<pre><code class="language-html">&lt;title&gt;myhub/weather/weather&lt;/title&gt;
&lt;script src=&quot;../node_modules/steal/steal.js&quot;
        main=&quot;myhub/weather/weather-test&quot;&gt;&lt;/script&gt;
&lt;div id=&quot;qunit-fixture&quot;&gt;&lt;/div&gt;
</code></pre>
<h3>Create the test</h3>
<p>Install <code>steal-qunit</code> with:</p>
<pre><code>&gt; npm install steal-qunit --save-dev
</code></pre>
<p>Create <em>weather/weather-test.js</em> with:</p>
<pre><code class="language-js">import QUnit from &quot;steal-qunit&quot;;
import weather from &quot;./weather&quot;;

QUnit.module(&quot;myhub/weather/&quot;);

QUnit.test(&quot;basics&quot;, function(assert){
    var done = assert.async();
    var fixtureEl = document.getElementById(&quot;qunit-fixture&quot;);

    weather(fixtureEl);

    assert.equal(
        fixtureEl.innerHTML,
        &quot;Loading...&quot;, &quot;starts with loading&quot;);

    var interval = setInterval(function(){
        var ul = fixtureEl.getElementsByTagName(&quot;ul&quot;);
        if(ul.length === 1) {
            assert.ok(true, &quot;inserted a ul&quot;);
            clearInterval(interval);
            done();
        }
    },100);
});
</code></pre>
<p>Open <a href="http://127.0.0.1:8080/weather/weather-test.html">http://127.0.0.1:8080/weather/weather-test.html</a> to
run the <strong>weather</strong> tests.</p>
<h3>Use the module</h3>
<p>Update <em>myhub.js</em> to:</p>
<pre><code class="language-js">import $ from &quot;jquery&quot;;
import &quot;./myhub.less&quot;;
import &quot;bootstrap/dist/css/bootstrap.css&quot;;
import weather from &quot;./weather/weather&quot;;

$(&quot;body&quot;).append(`
    &lt;div class=&quot;container&quot;&gt;
        &lt;h1&gt;Goodbye script tags!&lt;/h1&gt;
        &lt;div id=&quot;weather&quot;&gt;&lt;/div&gt;
    &lt;/div&gt;
`);

weather('#weather');
</code></pre>
<p><span line-highlight='4,9,13'></span>
Open <a href="http://127.0.0.1:8080/myhub.html">http://127.0.0.1:8080/myhub.html</a> to
see the application using the <strong>weather</strong> widget.</p>
<h2>Create a test with dependency injection</h2>
<p>Dependency injection is a technique used to improve testing in your application.</p>
<p>Steal provides dependency injection through its module loading system using <a href="steal.steal-clone.html" title="Steal-clone is a module that allows you to clone Steal's loader and provide module definitions that will be used when doing dynamic imports.">steal-clone</a>.</p>
<p>steal-clone allows you to create a <em>cloned</em> loader with stubs for modules that you want to fake.</p>
<p>We'll create a new test and use <a href="steal.steal-clone.html" title="Steal-clone is a module that allows you to clone Steal's loader and provide module definitions that will be used when doing dynamic imports.">steal-clone</a> to provide our own fake version of jQuery that will let us simulate a service request, so we can test that the rest of our app behaves correctly.</p>
<p>In the case of the test below, the app should list the single forecast it is given.</p>
<p>Update <em>weather/weather-test.js</em> with:</p>
<pre><code class="language-js">import QUnit from &quot;steal-qunit&quot;;
import weather from &quot;./weather&quot;;
import clone from &quot;steal-clone&quot;;
import $ from &quot;jquery&quot;;

QUnit.module(&quot;myhub/weather/&quot;);

QUnit.test(&quot;basics&quot;, function(assert){
    var done = assert.async();
    var fixtureEl = document.getElementById(&quot;qunit-fixture&quot;);

    weather(fixtureEl);

    assert.equal(
        fixtureEl.innerHTML,
        &quot;Loading...&quot;, &quot;starts with loading&quot;);

    var interval = setInterval(function(){
        var ul = fixtureEl.getElementsByTagName(&quot;ul&quot;);
        if(ul.length === 1) {
            assert.ok(true, &quot;inserted a ul&quot;);
            clearInterval(interval);
            done();
        }
    },100);
});

QUnit.test(&quot;basics with dependency injection&quot;, function(assert){
    var done = assert.async();

    var jQuery = function(selector){
        return $(selector)
    };
    jQuery.ajax = function(options){
        var dfd = new $.Deferred();
        setTimeout(function(){
            dfd.resolve({
                query: {
                    results: {
                        channel: {
                            item: {
                                forecast: [{
                                    date: new Date(),
                                    text: &quot;Sunny&quot;,
                                    high: &quot;72&quot;,
                                    low: &quot;58&quot;
                                }]
                            }
                        }
                    }
                }
            }).then(function(){
              var html = $(&quot;#qunit-fixture&quot;).html();

              assert.ok(/Sunny/.test(html),
                &quot;updated with request&quot;);
              done();
            });
        },1);
        return dfd;
    };

    clone({
        &quot;jquery&quot;: {&quot;default&quot;: jQuery}
    }).import(&quot;myhub/weather/weather&quot;).then(function(module){
        var weather = module[&quot;default&quot;];

        var fixtureEl = document.getElementById(&quot;qunit-fixture&quot;);
        weather(fixtureEl);
    });
});
</code></pre>
<p><span line-highlight='3-4,28-71'></span></p>
<h2>Import a global script in a CommonJS modlet</h2>
<p>Steal supports all of the most common module formats: <a href="syntax.es6.html" title="">ES modules</a>, <a href="syntax.CommonJS.html" title="">CommonJS </a>, and <a href="syntax.amd.html" title="">AMD </a>. This means your project can contain multiple formats which can be useful if, for example, you are using one module format in your project (like ES modules) but a package you want to depend on expects another module format (like CommonJS).</p>
<p>Some libraries on the web are still distributed as <a href="syntax.global.html" title="If a script simply exports its values on the global or window object,
it uses the &quot;global&quot; syntax.">globals</a>. Including such a library sets a property on the global <code>window</code> object, instead of exporting a value for use with one of the module formats mentioned above.</p>
<p>Steal is able to detect and deal with globals by default, but it's often necessary to add some configuration for correctness. The <a href="StealJS.configuration.html" title="">configuration guide</a> goes into greater depth on how to configure globals in more complex situations, but configuring the globals will be simple for our example.</p>
<h3>Install the package containing a global script</h3>
<p><a href="http://miromannino.github.io/Justified-Gallery/">Justified Gallery</a> is a library for displaying a gallery of images. Unfortunately, the library is distributed as a global; so we'll need to add some configuration.</p>
<p>Use npm to get the <code>justifiedGallery</code> package into your project:</p>
<pre><code>&gt; npm install justifiedGallery@3.6.5 --save-dev
</code></pre>
<h3>Create a modlet for <em>puppies</em></h3>
<p>Create <em>puppies/puppies.html</em>:</p>
<pre><code class="language-html">&lt;!doctype html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
      &lt;meta charset=&quot;utf-8&quot;&gt;
      &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;
      &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div class=&quot;container&quot;&gt;
        &lt;div id=&quot;puppies&quot;&gt;&lt;/div&gt;
    &lt;/div&gt;
    &lt;script src=&quot;../node_modules/steal/steal.js&quot;&gt;&lt;/script&gt;
    &lt;script type=&quot;text/steal-module&quot;&gt;
        var puppies =  require(&quot;myhub/puppies/puppies&quot;);
        puppies(&quot;#puppies&quot;);
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>Create <em>puppies/puppies.js</em> in CommonJS format:</p>
<pre><code class="language-js">require(&quot;justifiedGallery&quot;);

module.exports = function(selector) {

};
</code></pre>
<p>Open <a href="http://127.0.0.1:8080/puppies/puppies.html">http://127.0.0.1:8080/puppies/puppies.html</a> to
see that requiring <code>justifiedGallery</code> fails.</p>
<h3>Configure <code>package.json</code> for loading the global justifiedGallery package</h3>
<p>Configuration in Steal is usually done in the <code>package.json</code>, under the <code>steal</code> object.</p>
<p><a href="config.map.html" title="Alter moduleName keys.">map</a> maps the <code>&quot;justifiedGallery&quot;</code> <a href="moduleIdentifier.html" title="">identifier</a> to the JavaScript file location.</p>
<p><a href="config.meta.html" title="Specify properties on the metadata object.">meta</a> specifies that:</p>
<ul>
<li>This module is in a global format (<code>format</code>).</li>
<li>This module depends on jQuery (<code>deps</code>)</li>
<li>This module depends on its own style code (<code>justifiedGallery.less</code>).</li>
</ul>
<p>Update <em>package.json</em> to:</p>
<pre><code class="language-json">{
  &quot;name&quot;: &quot;myhub&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;description&quot;: &quot;&quot;,
  &quot;main&quot;: &quot;myhub.js&quot;,
  &quot;scripts&quot;: {
    &quot;start&quot;: &quot;http-server -c-1 .&quot;
  },
  &quot;author&quot;: &quot;&quot;,
  &quot;license&quot;: &quot;ISC&quot;,
  &quot;devDependencies&quot;: {
    &quot;bootstrap&quot;: &quot;^3.3.7&quot;,
    &quot;http-server&quot;: &quot;^0.10.0&quot;,
    &quot;jquery&quot;: &quot;^3.2.1&quot;,
    &quot;justifiedGallery&quot;: &quot;3.6.5&quot;,
    &quot;steal&quot;: &quot;^2.1.1&quot;,
    &quot;steal-css&quot;: &quot;^1.3.1&quot;,
    &quot;steal-less&quot;: &quot;^1.2.0&quot;,
    &quot;steal-qunit&quot;: &quot;^1.0.1&quot;,
    &quot;steal-tools&quot;: &quot;^1.8.4&quot;
  },
  &quot;steal&quot;: {
    &quot;plugins&quot;: [
      &quot;steal-css&quot;,
      &quot;steal-less&quot;
    ],
    &quot;map&quot;: {
      &quot;justifiedGallery&quot;: &quot;justifiedGallery/src/js/justifiedGallery&quot;
    },
    &quot;meta&quot;: {
      &quot;justifiedGallery/src/js/justifiedGallery&quot;: {
        &quot;format&quot;: &quot;global&quot;,
        &quot;deps&quot;: [
          &quot;jquery&quot;,
          &quot;justifiedGallery/src/less/justifiedGallery.less&quot;
        ]
      }
    }
  }
}
</code></pre>
<p><span line-highlight='27-38,only'></span></p>
<h3>Use justifiedGallery</h3>
<p>Now that justifiedGallery is installed <em>and configured</em>, we need to <code>require()</code> it in our <em>puppies</em> CommonJS module.</p>
<p>Change <em>puppies/puppies.js</em> to:</p>
<pre><code class="language-js">require(&quot;justifiedGallery&quot;);
var $ = require(&quot;jquery&quot;);

module.exports = function(selector) {
    $(selector).html(&quot;Loading...&quot;);

    $.ajax({
        url: 'https://api.flickr.com/services/feeds/photos_public.gne',
        dataType: 'jsonp',
        jsonpCallback: &quot;jsonFlickrFeed&quot;,
        data: {
            &quot;tags&quot;: &quot;puppy&quot;,
            &quot;format&quot;: &quot;json&quot;
        },
        success: function(response) {
            var html = response.items.map(function(item, index) {
                return '&lt;a href=&quot;' + item.link + '&quot;&gt;' +
                    '&lt;img alt=&quot;' + item.title + '&quot; src=&quot;' + item.media.m + '&quot;/&gt;' +
                    '&lt;/a&gt;';
            }).join(&quot;&quot;);
            var root = $(&quot;&lt;div&gt;&quot;).html(html);

            $(selector).html(root);
            root.justifiedGallery();
        }
    });
};
</code></pre>
<p><span line-highlight='2,5-26'></span>
Open <a href="http://127.0.0.1:8080/puppies/puppies.html">http://127.0.0.1:8080/puppies/puppies.html</a> to
see the <strong>puppies</strong> widget demo page.</p>
<p>At this point, we've done the following:</p>
<ul>
<li>Installed Justified Gallery.</li>
<li>Created a modlet for <em>puppies</em>.</li>
<li>Configured <a href="config.map.html" title="Alter moduleName keys.">map</a> and <a href="config.meta.html" title="Specify properties on the metadata object.">meta</a> in <code>package.json</code>.</li>
<li>Required <code>justifiedGallery</code> in the <em>puppies</em> CommonJS module.</li>
</ul>
<p>Getting functionality out of a global script from an npm package and into a modlet is easy as that, thanks to Steal.</p>
<h3>Update app to change pages</h3>
<p>Now that we've created <strong>puppies</strong>, the app needs to be updated so that it will toggle between the <em>weather</em> and <em>puppies</em> pages when using the navigation. More specfically, we will do this by looking at the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/location">location.hash</a> of the page.</p>
<p>Update <em>myhub.js</em> to:</p>
<pre><code class="language-js">import $ from &quot;jquery&quot;;
import &quot;./myhub.less&quot;;
import &quot;bootstrap/dist/css/bootstrap.css&quot;;
import weather from &quot;./weather/weather&quot;;
import puppies from &quot;./puppies/puppies&quot;;

$(&quot;body&quot;).append(`
    &lt;div class=&quot;container&quot;&gt;
        &lt;h1&gt;Goodbye script tags!&lt;/h1&gt;
        &lt;a href=&quot;#weather&quot;&gt;Weather&lt;/a&gt; &lt;a href=&quot;#puppies&quot;&gt;Puppies&lt;/a&gt;
        &lt;div id=&quot;main&quot;/&gt;
    &lt;/div&gt;`);

var modules = {
    weather: weather,
    puppies: puppies,
    &quot;&quot;: function(selector){
        $(selector).html(&quot;Welcome home&quot;);
    }
};

var updatePage = function(){
    var hash = window.location.hash.substr(1);
    modules[hash](&quot;#main&quot;);
};

$(window).on(&quot;hashchange&quot;, updatePage);

updatePage();
</code></pre>
<p><span line-highlight='5,8-29'></span>
There's a lot going on there, so you might want to re-read that file a couple of times to make sure you understand it.</p>
<h2>Build a production app</h2>
<p>Now that we've created our application, we need to share it with the public. To do this we'll create a build that will concat our JavaScript and styles down to only one file, each, for faster page loads in production.</p>
<h3>Build the app and switch to production</h3>
<p>When we first installed our initial dependencies for myhub, one of those was <em>steal-tools</em>. steal-tools is a set of tools that helps with bundling assets for production use.</p>
<p>In your package.json <code>&quot;scripts&quot;</code> section add:</p>
<pre><code class="language-json">{
  &quot;name&quot;: &quot;myhub&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;description&quot;: &quot;&quot;,
  &quot;main&quot;: &quot;myhub.js&quot;,
  &quot;scripts&quot;: {
    &quot;start&quot;: &quot;http-server -c-1 .&quot;,
    &quot;build&quot;: &quot;steal-tools&quot;
  },
  &quot;author&quot;: &quot;&quot;,
  &quot;license&quot;: &quot;ISC&quot;,
  &quot;devDependencies&quot;: {
    &quot;bootstrap&quot;: &quot;^3.3.7&quot;,
    &quot;http-server&quot;: &quot;^0.10.0&quot;,
    &quot;jquery&quot;: &quot;^3.2.1&quot;,
    &quot;justifiedGallery&quot;: &quot;3.6.5&quot;,
    &quot;steal&quot;: &quot;^2.1.1&quot;,
    &quot;steal-css&quot;: &quot;^1.3.1&quot;,
    &quot;steal-less&quot;: &quot;^1.2.0&quot;,
    &quot;steal-qunit&quot;: &quot;^1.0.1&quot;,
    &quot;steal-tools&quot;: &quot;^1.8.4&quot;
  },
  &quot;steal&quot;: {
    &quot;plugins&quot;: [
      &quot;steal-css&quot;,
      &quot;steal-less&quot;
    ],
    &quot;map&quot;: {
      &quot;justifiedGallery&quot;: &quot;justifiedGallery/src/js/justifiedGallery&quot;
    },
    &quot;meta&quot;: {
      &quot;justifiedGallery/src/js/justifiedGallery&quot;: {
        &quot;format&quot;: &quot;global&quot;,
        &quot;deps&quot;: [
          &quot;jquery&quot;,
          &quot;justifiedGallery/src/less/justifiedGallery.less&quot;
        ]
      }
    }
  }
}
</code></pre>
<p><span line-highlight='8,only'></span>
And then you can run:</p>
<pre><code>&gt; npm run build
</code></pre>
<p>To use the production artifacts rather than the development files we need to update our index.html to load them.</p>
<p>Create <em>index.html</em> with:</p>
<pre><code class="language-html">&lt;!doctype html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
      &lt;meta charset=&quot;utf-8&quot;&gt;
      &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;
      &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div class=&quot;container&quot;&gt;Hello World.&lt;/div&gt;
    &lt;script src=&quot;./dist/steal.production.js&quot;&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>By using <code>steal.production.js</code> instead of <code>steal.js</code> Steal will know to load the production files we just built.</p>
<h3>Preload css</h3>
<p>To prevent <a href="https://en.wikipedia.org/wiki/Flash_of_unstyled_content">flash of unstyled content</a> (or FOUC) we can add a link tag to the top of the page.</p>
<blockquote>
<p>Note that it is usually recommended not to include link tags for stylesheets in the head as it blocks the page from rendering until those styles are fetched. For this small demonstration we'll do it anyways. See <a href="https://developers.google.com/speed/docs/insights/OptimizeCSSDelivery">PageSpeed Tools</a> for more information.</p>
</blockquote>
<p>Update <em>index.html</em> to:</p>
<pre><code class="language-html">&lt;!doctype html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
      &lt;meta charset=&quot;utf-8&quot;&gt;
      &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;
      &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;
      &lt;link href=&quot;./dist/bundles/myhub/myhub.css&quot; rel=&quot;stylesheet&quot;&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div class=&quot;container&quot;&gt;Hello World.&lt;/div&gt;
    &lt;script src=&quot;./dist/steal.production.js&quot;&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p><span line-highlight='7'></span>
Now if you reload the page you'll notice that only a few resources are downloaded.</p>
<p><img width="744" alt="screen shot 2016-11-02 at 2 27 00 pm" src="https://cloud.githubusercontent.com/assets/361671/19943420/b0900d0c-a10d-11e6-99d6-8c1aea6632d5.png"></p>
<h3>Bundle steal.js</h3>
<p>You'll notice in the above screenshot that we are loading two JavaScript files. <em>myhub.js</em> and <em>steal.production.js</em>. We can avoid loading both by bundling Steal along with your app's main bundle.</p>
<p>Update your <code>build</code> script to add the <code>--bundle-steal</code> flag:</p>
<pre><code class="language-json">{
  &quot;name&quot;: &quot;myhub&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;description&quot;: &quot;&quot;,
  &quot;main&quot;: &quot;myhub.js&quot;,
  &quot;scripts&quot;: {
    &quot;start&quot;: &quot;http-server -c-1 .&quot;,
    &quot;build&quot;: &quot;steal-tools --bundle-steal&quot;
  },
  &quot;author&quot;: &quot;&quot;,
  &quot;license&quot;: &quot;ISC&quot;,
  &quot;devDependencies&quot;: {
    &quot;bootstrap&quot;: &quot;^3.3.7&quot;,
    &quot;http-server&quot;: &quot;^0.10.0&quot;,
    &quot;jquery&quot;: &quot;^3.2.1&quot;,
    &quot;justifiedGallery&quot;: &quot;3.6.5&quot;,
    &quot;steal&quot;: &quot;^2.1.1&quot;,
    &quot;steal-css&quot;: &quot;^1.3.1&quot;,
    &quot;steal-less&quot;: &quot;^1.2.0&quot;,
    &quot;steal-qunit&quot;: &quot;^1.0.1&quot;,
    &quot;steal-tools&quot;: &quot;^1.8.4&quot;
  },
  &quot;steal&quot;: {
    &quot;plugins&quot;: [
      &quot;steal-css&quot;,
      &quot;steal-less&quot;
    ],
    &quot;map&quot;: {
      &quot;justifiedGallery&quot;: &quot;justifiedGallery/src/js/justifiedGallery&quot;
    },
    &quot;meta&quot;: {
      &quot;justifiedGallery/src/js/justifiedGallery&quot;: {
        &quot;format&quot;: &quot;global&quot;,
        &quot;deps&quot;: [
          &quot;jquery&quot;,
          &quot;justifiedGallery/src/less/justifiedGallery.less&quot;
        ]
      }
    }
  }
}
</code></pre>
<p><span line-highlight='8,only'></span>
Run:</p>
<pre><code>&gt; npm run build
</code></pre>
<p>Update <em>index.html</em> to:</p>
<pre><code class="language-html">&lt;!doctype html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
      &lt;meta charset=&quot;utf-8&quot;&gt;
      &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;
      &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;
      &lt;link href=&quot;./dist/bundles/myhub/myhub.css&quot; rel=&quot;stylesheet&quot;&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div class=&quot;container&quot;&gt;Hello World.&lt;/div&gt;
    &lt;script src=&quot;./dist/bundles/myhub/myhub.js&quot;&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p><span line-highlight='11'></span></p>
<h2>Build a progressive loading production app</h2>
<p>For this size app we're in a good spot. For larging apps you want to avoid bundling your entire site into 1 JavaScript and one CSS file. Instead you should progressively load your app based on which page the user is viewing.</p>
<p>Steal enables this with <a href="config.bundle.html" title="Specifies which modules will be progressively loaded. This is
used by the build.">bundle</a> configuration.</p>
<h3>Make the app progressively load</h3>
<p>Update <em>myhub.js</em> to:</p>
<pre><code class="language-js">import $ from &quot;jquery&quot;;
import &quot;./myhub.less&quot;;
import &quot;bootstrap/dist/css/bootstrap.css&quot;;

$(&quot;body&quot;).append(`
    &lt;div class=&quot;container&quot;&gt;
        &lt;h1&gt;Goodbye script tags!&lt;/h1&gt;
        &lt;a href=&quot;#weather&quot;&gt;Weather&lt;/a&gt; &lt;a href=&quot;#puppies&quot;&gt;Puppies&lt;/a&gt;
        &lt;div id=&quot;main&quot;/&gt;
    &lt;/div&gt;`);

var updatePage = function(){
    var hash = window.location.hash.substr(1);
    if(!hash) {
        $(&quot;#main&quot;).html(&quot;Welcome home&quot;);
    } else {
        steal.import(`myhub/${hash}/${hash}`).then(function(moduleOrPlugin){
            var plugin = typeof moduleOrPlugin === &quot;function&quot; ?
                moduleOrPlugin : moduleOrPlugin[&quot;default&quot;];
            plugin(&quot;#main&quot;);
        });
    }
};

$(window).on(&quot;hashchange&quot;, updatePage);

updatePage();
</code></pre>
<p><span line-highlight='3,13-22'></span>
In the above code we have a div <code>#main</code> that each page renders into. Based on the location.hash, dynamically import the page being requested. So when the hash is <code>#weather</code> use <a href="steal.import.html" title="Dynamically imports modules after initial configuration has loaded. Otherwise works very similar to steal.loader.import.">steal.import</a> to import the weather modlet; if the hash is <code>#puppies</code> use steal.import to import the puppies modlet.</p>
<h3>Update bundles to build</h3>
<p>Using <a href="config.bundle.html" title="Specifies which modules will be progressively loaded. This is
used by the build.">bundle</a> we can specify each page of our application and steal-tools will build out separate bundles.</p>
<p>Update <em>package.json</em> to:</p>
<pre><code class="language-json">{
  &quot;name&quot;: &quot;myhub&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;description&quot;: &quot;&quot;,
  &quot;main&quot;: &quot;myhub.js&quot;,
  &quot;scripts&quot;: {
    &quot;start&quot;: &quot;http-server -c-1 .&quot;,
    &quot;build&quot;: &quot;steal-tools --bundle-steal&quot;
  },
  &quot;author&quot;: &quot;&quot;,
  &quot;license&quot;: &quot;ISC&quot;,
  &quot;devDependencies&quot;: {
    &quot;bootstrap&quot;: &quot;^3.3.7&quot;,
    &quot;http-server&quot;: &quot;^0.10.0&quot;,
    &quot;jquery&quot;: &quot;^3.2.1&quot;,
    &quot;justifiedGallery&quot;: &quot;3.6.5&quot;,
    &quot;steal&quot;: &quot;^2.1.1&quot;,
    &quot;steal-css&quot;: &quot;^1.3.1&quot;,
    &quot;steal-less&quot;: &quot;^1.2.0&quot;,
    &quot;steal-qunit&quot;: &quot;^1.0.1&quot;,
    &quot;steal-tools&quot;: &quot;^1.8.4&quot;
  },
  &quot;steal&quot;: {
    &quot;plugins&quot;: [
      &quot;steal-css&quot;,
      &quot;steal-less&quot;
    ],
    &quot;map&quot;: {
      &quot;justifiedGallery&quot;: &quot;justifiedGallery/src/js/justifiedGallery&quot;
    },
    &quot;meta&quot;: {
      &quot;justifiedGallery/src/js/justifiedGallery&quot;: {
        &quot;format&quot;: &quot;global&quot;,
        &quot;deps&quot;: [
          &quot;jquery&quot;,
          &quot;justifiedGallery/src/less/justifiedGallery.less&quot;
        ]
      }
    },
    &quot;bundle&quot;: [
      &quot;myhub/puppies/puppies&quot;,
      &quot;myhub/weather/weather&quot;
    ]
  }
}
</code></pre>
<p><span line-highlight='40-43,only'></span>
Run:</p>
<pre><code>&gt; npm run build
</code></pre>
<h3>Make a build script</h3>
<p>Using our existing <code>npm run build</code> command we create a build using the default <a href="steal-tools.BuildOptions.html" title="Options used to configure the build process.">build options</a>. In many cases you might want to customize these, so creating a small script allows you to do that more easily.</p>
<p>Create <em>build.js</em>:</p>
<pre><code class="language-js">var stealTools = require(&quot;steal-tools&quot;);

stealTools.build({}, {
  bundleSteal: true
});
</code></pre>
<p>Run the build script with:</p>
<pre><code>&gt; node build.js
</code></pre>
<h2>Export modules to other formats</h2>
<h3>Create an export script</h3>
<p>Create <em>export.js</em> with:</p>
<pre><code class="language-js">var stealTools = require(&quot;steal-tools&quot;);

stealTools.export({
  steal: {
    main: &quot;myhub/weather/weather&quot;,
    config: __dirname+&quot;/package.json!npm&quot;
  },
  options: {
    verbose: true
  },
  outputs: {
    &quot;+amd&quot;: {},
    &quot;+global-js&quot;: {
        exports: {
            &quot;myhub/weather/weather&quot;:&quot;weather&quot;,
            &quot;jquery&quot;: &quot;jQuery&quot;
        },
        dest: __dirname+&quot;/dist/global/weather.js&quot;
    },
    &quot;+global-css&quot;: {
      dest: __dirname+&quot;/dist/global/weather.css&quot;
    }
  }
});

</code></pre>
<p>Run:</p>
<pre><code class="language-js">&gt; node export.js
</code></pre>
<h3>Test the standalone module</h3>
<p>Create <em>weather/weather-standalone.html</em> with:</p>
<pre><code class="language-html">&lt;!doctype html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
      &lt;meta charset=&quot;utf-8&quot;&gt;
      &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;
      &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;
      &lt;link rel=&quot;stylesheet&quot; href=&quot;https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css&quot;&gt;
      &lt;link rel=&quot;stylesheet&quot; href=&quot;../dist/global/weather.css&quot;&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div id=&quot;forecast&quot;/&gt;
    &lt;script src=&quot;//code.jquery.com/jquery-3.0.0.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;../dist/global/weather.js&quot;&gt;&lt;/script&gt;
    &lt;script&gt;
        weather(&quot;#forecast&quot;);
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>

		</section>
		
		

		

		

	
	</article>
	


</div>


<survey-ad>
  <button aria-label="Close" class="close" type="button">
    <span aria-hidden="true">&times;</span>
  </button>
  <a href="https://donejs.com/survey.html" target="_blank">
    Help us improve StealJS by taking our community survey
  </a>
</survey-ad>


	
	<footer>
		<nav class="container">
			<a class="brand javascriptmvc" href="index.html"></a>
		</nav>
	</footer>
	

	<script type="text/javascript">
		var docObject = {"src":{"path":"doc/steal-topics/guides/progressive-loading.md"},"description":"\n","name":"StealJS.guides.progressive_loading","title":"Progressive Loading","type":"page","parent":"StealJS.guides","order":1,"outline":{"depth":0},"comment":" ","pathToRoot":".."};
	</script>

	
		<script>
		  steal = {
		    instantiated: {
		      "bundles/bit-docs-site/static.css!$css" : null
		    }
		  }
		</script>
		<script type='text/javascript'
				data-main="bit-docs-site/static"
				src="./static/node_modules/steal/steal.production.js"></script>
	
</body>

</html>
